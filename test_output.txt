
> casagestiâ”œâ”‚n-pwa@0.0.0 test
> vitest


[1m[44m DEV [49m[22m [34mv4.0.18 [39m[90mC:/Proyectos Python/Proyecto Palapa gestion servicios[39m

 [32mÎ“Â£Ã´[39m utils/__tests__/calculations.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 19[2mms[22m[39m
stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle invalid JSON gracefully
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "invalid-json". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:120:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle storage quota exceeded errors
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "quota-test". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:133:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "quota-test" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:138:27
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:137:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle localStorage not available (SSR)
[useSafeLocalStorage] Error al leer "ssr-test" de localStorage: TypeError: Cannot read properties of undefined (reading 'getItem')
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:27:40
    at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
    at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
    at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
    at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
    at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:147:9
    at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
[useSafeLocalStorage] Error al escribir "ssr-test" en localStorage: TypeError: Cannot read properties of undefined (reading 'setItem')
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:153:27
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:152:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)
    at Proxy.<anonymous> (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/expect/dist/index.js:1149:12)
    at Proxy.overwritingMethodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1750:33)

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should persist value across hook instances
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "shared-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:162:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "shared-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:166:28
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:165:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "shared-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:171:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should sync with storage events from other tabs
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "sync-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:190:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should ignore storage events for other keys
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "target-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:209:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle storage events with invalid JSON
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "invalid-sync-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:230:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] JSON invâ”œÃ­lido del evento storage para "invalid-sync-key". SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
    at JSON.parse (<anonymous>)
    at handleStorageChange (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:79:31)
    at callTheUserObjectsOperation (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at EventTargetImpl._dispatch (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at EventTargetImpl.dispatchEvent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
    at dispatchEvent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:242:16
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle null values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "null-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:251:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "null-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:255:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:254:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle undefined values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "undefined-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:264:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "undefined-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:268:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:267:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle number values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "number-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:277:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "number-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:281:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:280:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle boolean values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "boolean-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:290:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "boolean-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:294:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:293:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle date objects
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "date-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:304:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "date-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:62:31)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:308:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:307:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe usar el logger cuando ocurre un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useClearStorage > should handle errors gracefully
[useClearStorage] Error al limpiar localStorage: Error: Storage error
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:346:15)
    at Object.Mock [as removeItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:116:31
    at Array.forEach (<anonymous>)
    at Object.current (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:115:14)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:355:18
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:354:9

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useClearStorage > should handle localStorage not available
[useClearStorage] Error al limpiar localStorage: TypeError: Cannot read properties of undefined (reading 'removeItem')
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:116:31
    at Array.forEach (<anonymous>)
    at Object.current (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:115:14)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:369:18
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:368:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)

 [31mÎ“Â¥Â»[39m hooks/__tests__/useSafeLocalStorage.test.tsx [2m([22m[2m24 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 361[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return initial value when key does not exist[32m 45[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should store and retrieve values correctly[32m 11[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle complex objects[32m 11[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle arrays[32m 27[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle invalid JSON gracefully[32m 56[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle storage quota exceeded errors[32m 12[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage not available (SSR)[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should persist value across hook instances[32m 48[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should sync with storage events from other tabs[32m 18[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should ignore storage events for other keys[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle storage events with invalid JSON[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle null values[32m 24[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle undefined values[39m[32m 19[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle number values[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle boolean values[32m 6[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle date objects[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should clear specific keys[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should clear all storage when no keys specified[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle errors gracefully[32m 6[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage not available[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate storage size correctly[39m[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return zeros for empty storage[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage errors[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should estimate 5MB limit correctly[39m[32m 4[2mms[22m[39m
[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a manejar error simple de la API
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a manejar error simple de la API
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:138:30\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:137:13\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:159:30\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:158:13\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:171:30\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:170:13\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a limpiar error correctamente
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario limpiâ”œâ”‚ error de anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'clearAiError'[39m,
  hadError: [33mfalse[39m,
  hadAnalysis: [33mfalse[39m,
  retryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:211:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:210:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:211:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:210:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:211:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:210:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}
[2026-01-31T03:12:01.922Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:12:01.922Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829421922
}

stderr | components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe renderizar UI de error cuando hay un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:242:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:241:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

 [32mÎ“Â£Ã´[39m components/templates/__tests__/ErrorBoundary.logger.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 562[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m debe renderizar UI de error cuando hay un error [33m 393[2mms[22m[39m
stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:242:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:241:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:242:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:241:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}
[2026-01-31T03:12:01.922Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:12:01.922Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829421922
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769829421922[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:271:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:270:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:271:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:270:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:12:01.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:12:01.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:12:01.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:12:01.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:271:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:270:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}
[2026-01-31T03:12:01.922Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:12:01.922Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829421922
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:17:02.922Z] INFO: Sistema saliâ”œâ”‚ del modo degradado {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'checkSystemDegraded'[39m,
  degradedUntil: [33m1769829421922[39m
}
[2026-01-31T03:17:02.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:17:02.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:17:02.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 4,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:289:30\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:288:13\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}
[2026-01-31T03:17:02.922Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:17:02.922Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 3,
  degradedUntil: 1769829722922
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:17:02.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:17:02.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:17:02.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:308:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:307:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:17:02.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:17:02.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:17:02.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:308:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:307:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:17:02.922Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:17:02.922Z] ERROR: Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
 {
  context: {
    timestamp: '2026-01-31T03:17:02.922Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?\n' +
    'If you need to partially mock a module, you can use "importOriginal" helper inside:\n' +
    '\n' +
    '    at VitestMocker.createError (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)\n' +
    '    at Object.get (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)\n' +
    '    at withRetry (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/retry.ts:91:7)\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:169:33)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:308:32\n' +
    '    at C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:24\n' +
    '    at process.env.NODE_ENV.exports.act (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\react\\cjs\\react.development.js:814:22)\n' +
    '    at Proxy.<anonymous> (C:\\Proyectos Python\\Proyecto Palapa gestion servicios\\node_modules\\@testing-library\\react\\dist\\act-compat.js:46:25)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:307:15\n' +
    '    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:20'
}
[2026-01-31T03:17:02.922Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:17:02.922Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829722922
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:17:02.922Z] INFO: Usuario solicitâ”œâ”‚ reintentar anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleRetryAnalysis'[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}
[2026-01-31T03:17:02.922Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769829722922[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a manejar entrada manual correctamente
[22m[39m[2026-01-31T03:17:02.922Z] INFO: Usuario proporcionâ”œâ”‚ anâ”œÃ­lisis manual {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleManualInput'[39m,
  textLength: [33m26[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente
[22m[39m[2026-01-31T03:17:02.922Z] INFO: Usuario cancelâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:02.922Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleCancelAiAnalysis'[39m,
  wasLoading: [33mfalse[39m
}

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 263[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 55[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 31[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 15[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a manejar error simple de la API[39m[32m 33[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[39m[32m 13[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 8[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 30[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[39m[32m 18[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 18[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 7[2mms[22m[39m
 [32mÎ“Â£Ã´[39m components/organisms/__tests__/AIAnalysisPanel.integration.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 1383[2mms[22m[39m
       [33m[2mÎ“Â£Ã´[22m[39m debe mostrar estado de carga cuando loadingAi es true [33m 489[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 10 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle undefined values
AssertionError: expected "vi.fn()" to be called with arguments: [ 'undefined-key', 'undefined' ]

Received: 

  1st vi.fn() call:

  [
    "undefined-key",
-   "undefined",
+   undefined,
  ]


Number of calls: 1

 Î“Â¥Â» hooks/__tests__/useSafeLocalStorage.test.tsx:272:40
    270| 
    271|       expect(result.current[0]).toBe(undefined);
    272|       expect(localStorageMock.setItem).toHaveBeenCalledWith('undefinedÎ“Ã‡Âª
       |                                        ^
    273|     });
    274| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/10]Î“Ã„Â»

 FAIL  hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useLocalStorageSize > should calculate storage size correctly
AssertionError: expected 0 to be greater than 0
 Î“Â¥Â» hooks/__tests__/useSafeLocalStorage.test.tsx:396:35
    394|       );
    395| 
    396|       expect(result.current.used).toBeGreaterThan(0);
       |                                   ^
    397|       expect(result.current.available).toBeGreaterThan(0);
    398|       expect(result.current.percentage).toBeGreaterThanOrEqual(0);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/10]Î“Ã„Â»

 FAIL  hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useLocalStorageSize > should estimate 5MB limit correctly
AssertionError: expected 0 to be greater than 0
 Î“Â¥Â» hooks/__tests__/useSafeLocalStorage.test.tsx:448:41
    446|       );
    447| 
    448|       expect(result.current.percentage).toBeGreaterThan(0);
       |                                         ^
    449|       expect(result.current.percentage).toBeGreaterThanOrEqual(0);
    450|       expect(result.current.percentage).toBeLessThanOrEqual(100);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/10]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular KPIs correctamente
AssertionError: expected '0' to be '75' // Object.is equality

Expected: "75"
Received: "0"

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:110:52
    108|       );
    109| 
    110|       expect(result.current.kpiData.occupancyRate).toBe('75');
       |                                                    ^
    111|       expect(result.current.kpiData.adr).toBe('150');
    112|       expect(result.current.kpiData.avgStayDuration).toBe('3.5');

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/10]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular balance financiero
AssertionError: expected 100 to be 1000 // Object.is equality

- Expected
+ Received

- 1000
+ 100

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:121:59
    119|       );
    120| 
    121|       expect(result.current.financialBalance.totalIncome).toBe(1000);
       |                                                           ^
    122|       expect(result.current.financialBalance.totalExpenses).toBe(600);
    123|       expect(result.current.financialBalance.netProfit).toBe(400);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[5/10]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a manejar error simple de la API
AssertionError: expected '[vitest] No "logger" export is defineÎ“Ã‡Âª' to be 'API Error' // Object.is equality

- Expected
+ Received

- API Error
+ [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
+ If you need to partially mock a module, you can use "importOriginal" helper inside:
+

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:142:38
    140| 
    141|       expect(result.current.loadingAi).toBe(false);
    142|       expect(result.current.aiError).toBe('API Error');
       |                                      ^
    143|       expect(result.current.failureCount).toBe(1);
    144|       expect(result.current.retryAttempt).toBe(1);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[6/10]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
AssertionError: expected 2 to be +0 // Object.is equality

- Expected
+ Received

- 0
+ 2

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:174:43
    172|       });
    173| 
    174|       expect(result.current.failureCount).toBe(0);
       |                                           ^
    175|       expect(result.current.retryAttempt).toBe(0);
    176|       expect(result.current.aiAnalysis).toBe('Test analysis');

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[7/10]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
AssertionError: expected '[vitest] No "logger" export is defineÎ“Ã‡Âª' to be 'Persistent API Error' // Object.is equality

- Expected
+ Received

- Persistent API Error
+ [vitest] No "logger" export is defined on the "../../utils/logger" mock. Did you forget to return it from "vi.mock"?
+ If you need to partially mock a module, you can use "importOriginal" helper inside:
+

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:218:38
    216|       expect(result.current.isSystemDegraded).toBe(true);
    217|       expect(result.current.showFallback).toBe(true);
    218|       expect(result.current.aiError).toBe('Persistent API Error');
       |                                      ^
    219| 
    220|       // Verificar que se activâ”œâ”‚ el modo degradado por 5 minutos

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[8/10]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:292:47
    290|       });
    291| 
    292|       expect(result.current.isSystemDegraded).toBe(false);
       |                                               ^
    293|       expect(result.current.failureCount).toBe(0);
    294|       expect(result.current.aiAnalysis).toBe('Test analysis after recoÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[9/10]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:326:43
    324|       expect(result.current.isSystemDegraded).toBe(false);
    325|       expect(result.current.failureCount).toBe(0);
    326|       expect(result.current.showFallback).toBe(false);
       |                                           ^
    327|       expect(result.current.aiError).toBe(null);
    328|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[10/10]Î“Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (5)[39m
[2m      Tests [22m [1m[31m10 failed[39m[22m[2m | [22m[1m[32m90 passed[39m[22m[90m (100)[39m
[2m   Start at [22m 21:11:56
[2m   Duration [22m 7.94s[2m (transform 1.64s, setup 2.80s, import 6.16s, tests 2.59s, environment 18.43s)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mhooks/useSafeLocalStorage.ts [22m[34mx1 [34m[39m

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 263[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 55[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 31[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 15[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a manejar error simple de la API[39m[32m 33[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[39m[32m 13[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 8[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 30[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[39m[32m 18[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 18[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 7[2mms[22m[39m
stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle invalid JSON gracefully
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "invalid-json". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:120:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle storage quota exceeded errors
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "quota-test". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:133:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "quota-test" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:138:27
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:137:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle localStorage not available (SSR)
[useSafeLocalStorage] Error al leer "ssr-test" de localStorage: TypeError: Cannot read properties of undefined (reading 'getItem')
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:27:40
    at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
    at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
    at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
    at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
    at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:147:9
    at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
[useSafeLocalStorage] Error al escribir "ssr-test" en localStorage: TypeError: Cannot read properties of undefined (reading 'setItem')
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:153:27
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:152:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)
    at Proxy.<anonymous> (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/expect/dist/index.js:1149:12)
    at Proxy.overwritingMethodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1750:33)

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should persist value across hook instances
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "shared-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:162:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "shared-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:166:28
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:165:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "shared-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:171:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should sync with storage events from other tabs
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "sync-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:190:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should ignore storage events for other keys
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "target-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:209:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle storage events with invalid JSON
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "invalid-sync-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:230:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] JSON invâ”œÃ­lido del evento storage para "invalid-sync-key". SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
    at JSON.parse (<anonymous>)
    at handleStorageChange (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:83:31)
    at callTheUserObjectsOperation (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at EventTargetImpl._dispatch (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at EventTargetImpl.dispatchEvent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
    at dispatchEvent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:242:16
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle null values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "null-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:251:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "null-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:255:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:254:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle undefined values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "undefined-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:264:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle number values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "number-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:277:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "number-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:281:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:280:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle boolean values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "boolean-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:290:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "boolean-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:294:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:293:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle date objects
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "date-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:304:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "date-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:308:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:307:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useClearStorage > should handle errors gracefully
[useClearStorage] Error al limpiar localStorage: Error: Storage error
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:346:15)
    at Object.Mock [as removeItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:120:31
    at Array.forEach (<anonymous>)
    at Object.current (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:119:14)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:355:18
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:354:9

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useClearStorage > should handle localStorage not available
[useClearStorage] Error al limpiar localStorage: TypeError: Cannot read properties of undefined (reading 'removeItem')
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:120:31
    at Array.forEach (<anonymous>)
    at Object.current (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:119:14)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:369:18
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:368:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)

 [31mÎ“Â¥Â»[39m hooks/__tests__/useSafeLocalStorage.test.tsx [2m([22m[2m24 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 204[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return initial value when key does not exist[32m 38[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should store and retrieve values correctly[32m 10[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle complex objects[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle arrays[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle invalid JSON gracefully[32m 22[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle storage quota exceeded errors[32m 11[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage not available (SSR)[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should persist value across hook instances[32m 16[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should sync with storage events from other tabs[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should ignore storage events for other keys[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle storage events with invalid JSON[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle null values[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle undefined values[39m[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle number values[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle boolean values[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle date objects[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should clear specific keys[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should clear all storage when no keys specified[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle errors gracefully[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage not available[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should calculate storage size correctly[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return zeros for empty storage[32m 2[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage errors[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should estimate 5MB limit correctly[32m 4[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 1 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle undefined values
AssertionError: expected "vi.fn()" to be called with arguments: [ 'undefined-key', 'undefined' ]

Number of calls: 0

 Î“Â¥Â» hooks/__tests__/useSafeLocalStorage.test.tsx:272:40
    270| 
    271|       expect(result.current[0]).toBe(undefined);
    272|       expect(localStorageMock.setItem).toHaveBeenCalledWith('undefinedÎ“Ã‡Âª
       |                                        ^
    273|     });
    274| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m28 passed[39m[22m[90m (36)[39m
[2m   Start at [22m 21:14:34
[2m   Duration [22m 1.22s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/hooks/__tests__/useDashboardLogic.test.ts [22m[34mx1 [34m[39m

 [31mÎ“Â¥Â»[39m hooks/__tests__/useSafeLocalStorage.test.tsx [2m([22m[2m24 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 204[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return initial value when key does not exist[32m 38[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should store and retrieve values correctly[32m 10[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle complex objects[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle arrays[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle invalid JSON gracefully[32m 22[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle storage quota exceeded errors[32m 11[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage not available (SSR)[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should persist value across hook instances[32m 16[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should sync with storage events from other tabs[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should ignore storage events for other keys[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle storage events with invalid JSON[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle null values[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle undefined values[39m[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle number values[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle boolean values[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle date objects[32m 7[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should clear specific keys[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should clear all storage when no keys specified[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle errors gracefully[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage not available[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should calculate storage size correctly[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return zeros for empty storage[32m 2[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle localStorage errors[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should estimate 5MB limit correctly[32m 4[2mms[22m[39m
[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a manejar error simple de la API
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a manejar error simple de la API
[2026-01-31T03:14:47.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:150:9'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[2026-01-31T03:14:47.586Z] ERROR: Error: First error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: First error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:171:9'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Anâ”œÃ­lisis de IA completado exitosamente {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  success: [33mtrue[39m,
  sanitized: [90mundefined[39m,
  analysisLength: [33m13[39m,
  attempts: [33m1[39m,
  totalDelay: [33m0[39m,
  failureCount: [33m0[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a limpiar error correctamente
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario limpiâ”œâ”‚ error de anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'clearAiError'[39m,
  hadError: [33mfalse[39m,
  hadAnalysis: [33mfalse[39m,
  retryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:14:47.586Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:14:47.586Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:14:47.586Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}
[2026-01-31T03:14:47.586Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:14:47.586Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829587586
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:14:47.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:14:47.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:14:47.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}
[2026-01-31T03:14:47.586Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:14:47.586Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829587586
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769829587586[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:14:47.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:14:47.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:14:47.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:14:47.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:14:47.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:14:47.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}
[2026-01-31T03:14:47.586Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:14:47.586Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829587586
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Sistema saliâ”œâ”‚ del modo degradado {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'checkSystemDegraded'[39m,
  degradedUntil: [33m1769829587586[39m
}
[2026-01-31T03:19:48.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Anâ”œÃ­lisis de IA completado exitosamente {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  success: [33mtrue[39m,
  sanitized: [90mundefined[39m,
  analysisLength: [33m28[39m,
  attempts: [33m1[39m,
  totalDelay: [33m0[39m,
  failureCount: [33m0[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:19:48.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:19:48.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:19:48.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:19:48.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:19:48.586Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:19:48.586Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}
[2026-01-31T03:19:48.586Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:19:48.586Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829888586
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Usuario solicitâ”œâ”‚ reintentar anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleRetryAnalysis'[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}
[2026-01-31T03:19:48.586Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769829888586[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a manejar entrada manual correctamente
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Usuario proporcionâ”œâ”‚ anâ”œÃ­lisis manual {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleManualInput'[39m,
  textLength: [33m26[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente
[22m[39m[2026-01-31T03:19:48.586Z] INFO: Usuario cancelâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:19:48.586Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleCancelAiAnalysis'[39m,
  wasLoading: [33mfalse[39m
}

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 276[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 45[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 14[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 26[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 15[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 35[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 21[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 29[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 39[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 7[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 4 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular KPIs correctamente
AssertionError: expected '0' to be '75' // Object.is equality

Expected: "75"
Received: "0"

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:122:52
    120|       );
    121| 
    122|       expect(result.current.kpiData.occupancyRate).toBe('75');
       |                                                    ^
    123|       expect(result.current.kpiData.adr).toBe('150');
    124|       expect(result.current.kpiData.avgStayDuration).toBe('3.5');

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular balance financiero
AssertionError: expected 100 to be 1000 // Object.is equality

- Expected
+ Received

- 1000
+ 100

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:133:59
    131|       );
    132| 
    133|       expect(result.current.financialBalance.totalIncome).toBe(1000);
       |                                                           ^
    134|       expect(result.current.financialBalance.totalExpenses).toBe(600);
    135|       expect(result.current.financialBalance.netProfit).toBe(400);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
AssertionError: expected "vi.fn()" to be called with arguments: [ Î“Ã‡Âª(2) ]

Received: 

  1st vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]

  2nd vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]

  3rd vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]


Number of calls: 3

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:233:37
    231| 
    232|       // Verificar que se activâ”œâ”‚ el modo degradado por 5 minutos
    233|       expect(vi.mocked(logWarning)).toHaveBeenCalledWith(
       |                                     ^
    234|         'Sistema entrâ”œâ”‚ en modo degradado por 5 minutos',
    235|         expect.objectContaining({

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:338:43
    336|       expect(result.current.isSystemDegraded).toBe(false);
    337|       expect(result.current.failureCount).toBe(0);
    338|       expect(result.current.showFallback).toBe(false);
       |                                           ^
    339|       expect(result.current.aiError).toBe(null);
    340|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/4]Î“Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m31 passed[39m[22m[90m (36)[39m
[2m   Start at [22m 21:14:43
[2m   Duration [22m 1.61s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mhooks/__tests__/useSafeLocalStorage.test.tsx [22m[34mx2 [34m[39m

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 276[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 45[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 14[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 26[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 15[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 35[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 21[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 29[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 39[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 7[2mms[22m[39m
stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle invalid JSON gracefully
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "invalid-json". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:120:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle storage quota exceeded errors
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "quota-test". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:133:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "quota-test" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:138:27
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:137:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle localStorage not available (SSR)
[useSafeLocalStorage] Error al leer "ssr-test" de localStorage: TypeError: Cannot read properties of undefined (reading 'getItem')
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:27:40
    at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
    at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
    at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
    at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
    at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:147:9
    at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
[useSafeLocalStorage] Error al escribir "ssr-test" en localStorage: TypeError: Cannot read properties of undefined (reading 'setItem')
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:153:27
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:152:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)
    at Proxy.<anonymous> (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/expect/dist/index.js:1149:12)
    at Proxy.overwritingMethodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1750:33)

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should persist value across hook instances
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "shared-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:162:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "shared-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:166:28
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:165:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "shared-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:171:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should sync with storage events from other tabs
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "sync-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:190:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should ignore storage events for other keys
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "target-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:209:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle storage events with invalid JSON
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "invalid-sync-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:230:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] JSON invâ”œÃ­lido del evento storage para "invalid-sync-key". SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
    at JSON.parse (<anonymous>)
    at handleStorageChange (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:83:31)
    at callTheUserObjectsOperation (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at EventTargetImpl._dispatch (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at EventTargetImpl.dispatchEvent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
    at dispatchEvent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:242:16
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle null values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "null-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:251:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "null-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:255:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:254:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle undefined values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "undefined-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:264:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle number values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "number-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:277:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "number-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:281:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:280:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle boolean values
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "boolean-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:290:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "boolean-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:294:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:293:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > manejo de errores > should handle date objects
[useSafeLocalStorage] JSON invâ”œÃ­lido para clave "date-key". Usando valor inicial. {
  error: SyntaxError: Unexpected token 'i', "invalid-json-content" is not valid JSON
      at JSON.parse (<anonymous>)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:36:29
      at mountStateImpl (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8268:24)
      at mountState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:8289:22)
      at Object.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:26243:18)
      at process.env.NODE_ENV.exports.useState (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:1263:34)
      at useSafeLocalStorage (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:19:41)
      at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:304:9
      at TestComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\pure.js:330:27)
      at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20),
  storedValue: 'invalid-json-content'
}
[useSafeLocalStorage] Error al escribir "date-key" en localStorage: Error: QuotaExceededError
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:129:15)
    at Object.Mock [as setItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at Array.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:65:33)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:308:25
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:307:7
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/runner/dist/index.js:915:26

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useClearStorage > should handle errors gracefully
[useClearStorage] Error al limpiar localStorage: Error: Storage error
    at Object.<anonymous> (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:346:15)
    at Object.Mock [as removeItem] (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/@vitest/spy/dist/index.js:285:34)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:120:31
    at Array.forEach (<anonymous>)
    at Object.current (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:119:14)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:355:18
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:354:9

stderr | hooks/__tests__/useSafeLocalStorage.test.tsx > useSafeLocalStorage > useClearStorage > should handle localStorage not available
[useClearStorage] Error al limpiar localStorage: TypeError: Cannot read properties of undefined (reading 'removeItem')
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:120:31
    at Array.forEach (<anonymous>)
    at Object.current (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useSafeLocalStorage.ts:119:14)
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:369:18
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:47:24
    at process.env.NODE_ENV.exports.act (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react\cjs\react.development.js:814:22)
    at C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\@testing-library\react\dist\act-compat.js:46:25
    at C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/__tests__/useSafeLocalStorage.test.tsx:368:9
    at Proxy.assertThrows (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/chai/index.js:1700:25)

 [32mÎ“Â£Ã´[39m hooks/__tests__/useSafeLocalStorage.test.tsx [2m([22m[2m24 tests[22m[2m)[22m[32m 182[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (36)[39m
[2m   Start at [22m 21:14:49
[2m   Duration [22m 1.10s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[33mTest removed...[39m[2m [ utils/__tests__/calculations.test.ts ]
[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/utils/__tests__/calculations.test.ts [22m[34mx1 [34m[39m

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 276[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 45[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 14[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 26[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 15[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 35[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 21[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 29[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 39[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 7[2mms[22m[39m
 [31mÎ“Â¥Â»[39m src/utils/__tests__/calculations.test.ts [2m([22m[2m0 test[22m[2m)[22m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Suites 1 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/utils/__tests__/calculations.test.ts [ src/utils/__tests__/calculations.test.ts ]
Error: Failed to resolve import "../../src/types" from "src/utils/__tests__/calculations.test.ts". Does the file exist?
  Plugin: vite:import-analysis
  File: C:/Proyectos Python/Proyecto Palapa gestion servicios/src/utils/__tests__/calculations.test.ts:15:92
  8  |    calculateAllMetrics
  9  |  } from "../calculations";
  10 |  import { TransactionType, ReservationStatus, PaymentMethod } from "../../src/types";
     |                                                                     ^
  11 |  describe("Financial Calculation Utils", () => {
  12 |    const mockTransactions = [
 Î“Â¥Â» TransformPluginContext._formatLog ../../Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vite/dist/node/chunks/dep-D4NMHUTW.js:42528:41
 Î“Â¥Â» TransformPluginContext.error ../../Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vite/dist/node/chunks/dep-D4NMHUTW.js:42525:16
 Î“Â¥Â» normalizeUrl ../../Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vite/dist/node/chunks/dep-D4NMHUTW.js:40504:23
 Î“Â¥Â» ../../Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vite/dist/node/chunks/dep-D4NMHUTW.js:40623:37
 Î“Â¥Â» TransformPluginContext.transform ../../Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vite/dist/node/chunks/dep-D4NMHUTW.js:40550:7
 Î“Â¥Â» EnvironmentPluginContainer.transform ../../Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vite/dist/node/chunks/dep-D4NMHUTW.js:42323:18
 Î“Â¥Â» loadAndTransform ../../Proyectos%20Python/Proyecto%20Palapa%20gestion%20servicios/node_modules/vite/dist/node/chunks/dep-D4NMHUTW.js:35739:27

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:16:49
[2m   Duration [22m 425ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[33mTest removed...[39m[2m [ hooks/__tests__/useSafeLocalStorage.test.tsx ]
[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/utils/logger.ts [22m[34mx2 [34m[39m

 [31mÎ“Â¥Â»[39m src/utils/__tests__/calculations.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a manejar error simple de la API
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a manejar error simple de la API
[2026-01-31T03:17:06.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:150:9'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[2026-01-31T03:17:06.526Z] ERROR: Error: First error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: First error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:171:9'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Anâ”œÃ­lisis de IA completado exitosamente {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  success: [33mtrue[39m,
  sanitized: [90mundefined[39m,
  analysisLength: [33m13[39m,
  attempts: [33m1[39m,
  totalDelay: [33m0[39m,
  failureCount: [33m0[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a limpiar error correctamente
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario limpiâ”œâ”‚ error de anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'clearAiError'[39m,
  hadError: [33mfalse[39m,
  hadAnalysis: [33mfalse[39m,
  retryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:17:06.526Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:17:06.526Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:17:06.526Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}
[2026-01-31T03:17:06.526Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:17:06.526Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829726526
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:17:06.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:17:06.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:17:06.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}
[2026-01-31T03:17:06.526Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:17:06.526Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829726526
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769829726526[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:17:06.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:17:06.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:17:06.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:17:06.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:17:06.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:17:06.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}
[2026-01-31T03:17:06.526Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:17:06.526Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769829726526
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Sistema saliâ”œâ”‚ del modo degradado {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'checkSystemDegraded'[39m,
  degradedUntil: [33m1769829726526[39m
}
[2026-01-31T03:22:07.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Anâ”œÃ­lisis de IA completado exitosamente {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  success: [33mtrue[39m,
  sanitized: [90mundefined[39m,
  analysisLength: [33m28[39m,
  attempts: [33m1[39m,
  totalDelay: [33m0[39m,
  failureCount: [33m0[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:22:07.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:07.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:22:07.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:07.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:22:07.526Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:07.526Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}
[2026-01-31T03:22:07.526Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:22:07.526Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769830027526
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Usuario solicitâ”œâ”‚ reintentar anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleRetryAnalysis'[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}
[2026-01-31T03:22:07.526Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769830027526[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a manejar entrada manual correctamente
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Usuario proporcionâ”œâ”‚ anâ”œÃ­lisis manual {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleManualInput'[39m,
  textLength: [33m26[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente
[22m[39m[2026-01-31T03:22:07.526Z] INFO: Usuario cancelâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:07.526Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleCancelAiAnalysis'[39m,
  wasLoading: [33mfalse[39m
}

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 230[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 40[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 21[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 11[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 18[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 19[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 9[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 30[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 18[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 22[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 6[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 4 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular KPIs correctamente
AssertionError: expected '0' to be '75' // Object.is equality

Expected: "75"
Received: "0"

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:122:52
    120|       );
    121| 
    122|       expect(result.current.kpiData.occupancyRate).toBe('75');
       |                                                    ^
    123|       expect(result.current.kpiData.adr).toBe('150');
    124|       expect(result.current.kpiData.avgStayDuration).toBe('3.5');

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular balance financiero
AssertionError: expected 100 to be 1000 // Object.is equality

- Expected
+ Received

- 1000
+ 100

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:133:59
    131|       );
    132| 
    133|       expect(result.current.financialBalance.totalIncome).toBe(1000);
       |                                                           ^
    134|       expect(result.current.financialBalance.totalExpenses).toBe(600);
    135|       expect(result.current.financialBalance.netProfit).toBe(400);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
AssertionError: expected "vi.fn()" to be called with arguments: [ Î“Ã‡Âª(2) ]

Received: 

  1st vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]

  2nd vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]

  3rd vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]


Number of calls: 3

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:233:37
    231| 
    232|       // Verificar que se activâ”œâ”‚ el modo degradado por 5 minutos
    233|       expect(vi.mocked(logWarning)).toHaveBeenCalledWith(
       |                                     ^
    234|         'Sistema entrâ”œâ”‚ en modo degradado por 5 minutos',
    235|         expect.objectContaining({

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:338:43
    336|       expect(result.current.isSystemDegraded).toBe(false);
    337|       expect(result.current.failureCount).toBe(0);
    338|       expect(result.current.showFallback).toBe(false);
       |                                           ^
    339|       expect(result.current.aiError).toBe(null);
    340|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/4]Î“Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:17:01
[2m   Duration [22m 1.52s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[33mTest removed...[39m[2m [ components/organisms/__tests__/AIAnalysisPanel.integration.test.tsx ]
[22m
[33mTest removed...[39m[2m [ components/templates/__tests__/ErrorBoundary.logger.test.tsx ]
[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/templates/__tests__/ErrorBoundary.logger.test.tsx [22m[39m

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 230[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 40[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 21[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 11[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 18[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 19[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 9[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 30[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 18[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 22[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 6[2mms[22m[39m
 [31mÎ“Â¥Â»[39m src/utils/__tests__/calculations.test.ts [2m([22m[2m0 test[22m[2m)[22m
stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe usar el logger cuando ocurre un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe renderizar UI de error cuando hay un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/components/templates/__tests__/ErrorBoundary.logger.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 547[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m debe renderizar UI de error cuando hay un error [33m 399[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/components/organisms/__tests__/AIAnalysisPanel.integration.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 1234[2mms[22m[39m
       [33m[2mÎ“Â£Ã´[22m[39m debe mostrar estado de carga cuando loadingAi es true [33m 469[2mms[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (4)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m34 passed[39m[22m[90m (38)[39m
[2m   Start at [22m 21:17:20
[2m   Duration [22m 4.86s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/services/geminiService.ts [22m[34mx3 [34m[39m

 [31mÎ“Â¥Â»[39m src/utils/__tests__/calculations.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a manejar error simple de la API
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a manejar error simple de la API
[2026-01-31T03:22:08.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:150:9'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 2) Manejo de errores de la API > deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[2026-01-31T03:22:08.342Z] ERROR: Error: First error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: First error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:171:9'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Anâ”œÃ­lisis de IA completado exitosamente {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  success: [33mtrue[39m,
  sanitized: [90mundefined[39m,
  analysisLength: [33m13[39m,
  attempts: [33m1[39m,
  totalDelay: [33m0[39m,
  failureCount: [33m0[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m2) Manejo de errores de la API[2m > [22m[2mdeberâ”œÂ¡a limpiar error correctamente
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario limpiâ”œâ”‚ error de anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'clearAiError'[39m,
  hadError: [33mfalse[39m,
  hadAnalysis: [33mfalse[39m,
  retryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:22:08.342Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:22:08.342Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
[2026-01-31T03:22:08.342Z] ERROR: Error: Persistent API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: Persistent API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:223:11'
}
[2026-01-31T03:22:08.342Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:22:08.342Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769830028342
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:22:08.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:22:08.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[2026-01-31T03:22:08.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:254:11'
}
[2026-01-31T03:22:08.342Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:22:08.342Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769830028342
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mno deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769830028342[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:22:08.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:22:08.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:22:08.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:22:08.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[2026-01-31T03:22:08.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:22:08.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:283:11'
}
[2026-01-31T03:22:08.342Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:22:08.342Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769830028342
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Sistema saliâ”œâ”‚ del modo degradado {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'checkSystemDegraded'[39m,
  degradedUntil: [33m1769830028342[39m
}
[2026-01-31T03:27:09.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Anâ”œÃ­lisis de IA completado exitosamente {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  success: [33mtrue[39m,
  sanitized: [90mundefined[39m,
  analysisLength: [33m28[39m,
  attempts: [33m1[39m,
  totalDelay: [33m0[39m,
  failureCount: [33m0[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m0[39m,
  failureCount: [33m0[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:27:09.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:27:09.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 1,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m1[39m,
  failureCount: [33m1[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:27:09.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:27:09.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 2,
    maxFailures: 3,
    willActivateDegradedMode: false
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Usuario iniciâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  transactionsCount: [33m1[39m,
  reservationsCount: [33m1[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m2[39m,
  isSystemDegraded: [33mfalse[39m
}

stderr | src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
[2026-01-31T03:27:09.342Z] ERROR: Error: API Error {
  context: {
    timestamp: '2026-01-31T03:27:09.342Z',
    userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
    url: 'http://localhost:3000/',
    component: 'useDashboardLogic',
    action: 'handleAiAnalysis',
    failureCount: 3,
    maxFailures: 3,
    willActivateDegradedMode: true
  },
  stack: 'Error: API Error\n' +
    '    at Object.handleAiAnalysis (C:/Proyectos Python/Proyecto Palapa gestion servicios/hooks/useDashboardLogic.ts:210:15)\n' +
    '    at C:/Proyectos Python/Proyecto Palapa gestion servicios/src/hooks/__tests__/useDashboardLogic.test.ts:320:11'
}
[2026-01-31T03:27:09.342Z] WARN: Sistema entrâ”œâ”‚ en modo degradado por 5 minutos {
  timestamp: '2026-01-31T03:27:09.342Z',
  userAgent: 'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0',
  url: 'http://localhost:3000/',
  component: 'useDashboardLogic',
  action: 'activateDegradedMode',
  failureCount: 2,
  degradedUntil: 1769830329342
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2m3) Activaciâ”œâ”‚n de System degradation mode[2m > [22m[2mdeberâ”œÂ¡a resetear modo degradado en retry manual
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Usuario solicitâ”œâ”‚ reintentar anâ”œÃ­lisis {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleRetryAnalysis'[39m,
  currentRetryAttempt: [33m2[39m,
  failureCount: [33m3[39m,
  isSystemDegraded: [33mtrue[39m
}
[2026-01-31T03:27:09.342Z] INFO: Sistema degradado, usando fallback automâ”œÃ­ticamente {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleAiAnalysis'[39m,
  isSystemDegraded: [33mtrue[39m,
  degradedUntil: [33m1769830329342[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a manejar entrada manual correctamente
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Usuario proporcionâ”œâ”‚ anâ”œÃ­lisis manual {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleManualInput'[39m,
  textLength: [33m26[39m
}

[90mstdout[2m | src/hooks/__tests__/useDashboardLogic.test.ts[2m > [22m[2museDashboardLogic[2m > [22m[2mFunciones adicionales[2m > [22m[2mdeberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente
[22m[39m[2026-01-31T03:27:09.342Z] INFO: Usuario cancelâ”œâ”‚ anâ”œÃ­lisis de IA {
  timestamp: [32m'2026-01-31T03:27:09.342Z'[39m,
  userAgent: [32m'Mozilla/5.0 (win32) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.4.0'[39m,
  url: [32m'http://localhost:3000/'[39m,
  component: [32m'useDashboardLogic'[39m,
  action: [32m'handleCancelAiAnalysis'[39m,
  wasLoading: [33mfalse[39m
}

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 182[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 34[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular KPIs correctamente[39m[32m 17[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a calcular balance financiero[39m[32m 8[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 20[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 14[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[39m[32m 25[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 12[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 17[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 16[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 6[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 3[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 4 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular KPIs correctamente
AssertionError: expected '0' to be '75' // Object.is equality

Expected: "75"
Received: "0"

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:122:52
    120|       );
    121| 
    122|       expect(result.current.kpiData.occupancyRate).toBe('75');
       |                                                    ^
    123|       expect(result.current.kpiData.adr).toBe('150');
    124|       expect(result.current.kpiData.avgStayDuration).toBe('3.5');

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 1) Inicializaciâ”œâ”‚n correcta > deberâ”œÂ¡a calcular balance financiero
AssertionError: expected 100 to be 1000 // Object.is equality

- Expected
+ Received

- 1000
+ 100

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:133:59
    131|       );
    132| 
    133|       expect(result.current.financialBalance.totalIncome).toBe(1000);
       |                                                           ^
    134|       expect(result.current.financialBalance.totalExpenses).toBe(600);
    135|       expect(result.current.financialBalance.netProfit).toBe(400);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos
AssertionError: expected "vi.fn()" to be called with arguments: [ Î“Ã‡Âª(2) ]

Received: 

  1st vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]

  2nd vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]

  3rd vi.fn() call:

  [
-   "Sistema entrâ”œâ”‚ en modo degradado por 5 minutos",
-   ObjectContaining {
-     "action": "activateDegradedMode",
-     "component": "useDashboardLogic",
+   "Operation failed on attempt 1",
+   {
+     "attempt": 1,
+     "component": "retry",
+     "error": "Persistent API Error",
    },
  ]


Number of calls: 3

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:233:37
    231| 
    232|       // Verificar que se activâ”œâ”‚ el modo degradado por 5 minutos
    233|       expect(vi.mocked(logWarning)).toHaveBeenCalledWith(
       |                                     ^
    234|         'Sistema entrâ”œâ”‚ en modo degradado por 5 minutos',
    235|         expect.objectContaining({

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/4]Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:338:43
    336|       expect(result.current.isSystemDegraded).toBe(false);
    337|       expect(result.current.failureCount).toBe(0);
    338|       expect(result.current.showFallback).toBe(false);
       |                                           ^
    339|       expect(result.current.aiError).toBe(null);
    340|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/4]Î“Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:22:03
[2m   Duration [22m 1.48s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/hooks/__tests__/useDashboardLogic.test.ts [22m[34mx4 [34m[39m

 [31mÎ“Â¥Â»[39m src/utils/__tests__/calculations.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 117[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 31[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular KPIs correctamente[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular balance financiero[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 10[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 19[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 3[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 1 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/hooks/__tests__/useDashboardLogic.test.ts > useDashboardLogic > 3) Activaciâ”œâ”‚n de System degradation mode > deberâ”œÂ¡a resetear modo degradado en retry manual
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 Î“Â¥Â» src/hooks/__tests__/useDashboardLogic.test.ts:338:43
    336|       expect(result.current.isSystemDegraded).toBe(false);
    337|       expect(result.current.failureCount).toBe(0);
    338|       expect(result.current.showFallback).toBe(false);
       |                                           ^
    339|       expect(result.current.aiError).toBe(null);
    340|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:25:39
[2m   Duration [22m 1.39s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/utils/__tests__/calculations.test.ts [22m[34mx2 [34m[39m

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 117[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 31[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular KPIs correctamente[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular balance financiero[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 10[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 19[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 3[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/utils/__tests__/calculations.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 24[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m49 passed[39m[22m[90m (50)[39m
[2m   Start at [22m 21:25:48
[2m   Duration [22m 635ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/organisms/__tests__/AIAnalysisPanel.integration.test.tsx [22m[34mx2 [34m[39m

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 117[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 31[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular KPIs correctamente[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular balance financiero[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 10[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 19[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 3[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/components/organisms/__tests__/AIAnalysisPanel.integration.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 1103[2mms[22m[39m
       [33m[2mÎ“Â£Ã´[22m[39m debe mostrar estado de carga cuando loadingAi es true [33m 407[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m34 passed[39m[22m[90m (35)[39m
[2m   Start at [22m 21:25:57
[2m   Duration [22m 2.40s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/templates/__tests__/ErrorBoundary.logger.test.tsx [22m[34mx2 [34m[39m

 [31mÎ“Â¥Â»[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 117[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a inicializar con valores por defecto[32m 31[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular KPIs correctamente[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a calcular balance financiero[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar error simple de la API[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a resetear contadores en anâ”œÃ­lisis exitoso[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a limpiar error correctamente[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a activar modo degradado tras 3 fallos consecutivos[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m no deberâ”œÂ¡a llamar a API cuando estâ”œÃ­ en modo degradado[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a salir del modo degradado despuâ”œâŒs de 5 minutos[32m 10[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m deberâ”œÂ¡a resetear modo degradado en retry manual[39m[32m 19[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a manejar entrada manual correctamente[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m deberâ”œÂ¡a cancelar anâ”œÃ­lisis correctamente[32m 3[2mms[22m[39m
stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe usar el logger cuando ocurre un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe renderizar UI de error cuando hay un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/components/templates/__tests__/ErrorBoundary.logger.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 450[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m debe renderizar UI de error cuando hay un error [33m 350[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m14 passed[39m[22m[90m (15)[39m
[2m   Start at [22m 21:26:08
[2m   Duration [22m 1.48s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/hooks/useDashboardLogic.ts [22m[34mx5 [34m[39m

 [32mÎ“Â£Ã´[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 162[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m12 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:27:32
[2m   Duration [22m 2.10s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/templates/ErrorBoundary.tsx [22m[34mx3 [34m[39m

stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe usar el logger cuando ocurre un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe renderizar UI de error cuando hay un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/components/templates/__tests__/ErrorBoundary.logger.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 548[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m debe renderizar UI de error cuando hay un error [33m 392[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m   Start at [22m 21:29:24
[2m   Duration [22m 1.69s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/hooks/__tests__/useDashboardLogic.test.ts [22m[34mx6 [34m[39m

 [32mÎ“Â£Ã´[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 164[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m12 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:30:33
[2m   Duration [22m 1.76s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/organisms/__tests__/AIAnalysisPanel.integration.test.tsx [22m[34mx3 [34m[39m

 [32mÎ“Â£Ã´[39m src/components/organisms/__tests__/AIAnalysisPanel.integration.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 1498[2mms[22m[39m
       [33m[2mÎ“Â£Ã´[22m[39m debe mostrar estado de carga cuando loadingAi es true [33m 537[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m23 passed[39m[22m[90m (23)[39m
[2m   Start at [22m 21:30:40
[2m   Duration [22m 2.66s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/templates/__tests__/ErrorBoundary.logger.test.tsx [22m[34mx4 [34m[39m

stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe usar el logger cuando ocurre un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe renderizar UI de error cuando hay un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/components/templates/__tests__/ErrorBoundary.logger.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 538[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m debe renderizar UI de error cuando hay un error [33m 396[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m   Start at [22m 21:30:46
[2m   Duration [22m 1.56s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/utils/logger.ts [22m[39m

stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe usar el logger cuando ocurre un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 196[2mms[22m[39m
stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe renderizar UI de error cuando hay un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/components/templates/__tests__/ErrorBoundary.logger.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 534[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m debe renderizar UI de error cuando hay un error [33m 409[2mms[22m[39m

[2m Test Files [22m [1m[32m2 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[32m15 passed[39m[22m[90m (15)[39m
[2m   Start at [22m 21:39:33
[2m   Duration [22m 3.87s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/utils/retry.ts [22m[34mx8 [34m[39m

 [32mÎ“Â£Ã´[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 112[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m12 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:39:59
[2m   Duration [22m 1.23s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/utils/logger.ts [22m[39m

stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe usar el logger cuando ocurre un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/hooks/__tests__/useDashboardLogic.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 175[2mms[22m[39m
stderr | src/components/templates/__tests__/ErrorBoundary.logger.test.tsx > ErrorBoundary con Logger Integrado > debe renderizar UI de error cuando hay un error
Error: Test error for ErrorBoundary
    at ThrowErrorComponent (C:/Proyectos Python/Proyecto Palapa gestion servicios/src/components/templates/__tests__/ErrorBoundary.logger.test.tsx:16:11)
    at Object.react_stack_bottom_frame (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:25904:20)
    at renderWithHooks (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:7662:22)
    at updateFunctionComponent (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:10166:19)
    at beginWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:11778:18)
    at runWithFiberInDEV (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
    at performUnitOfWork (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17641:22)
    at workLoopSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17469:41)
    at renderRootSync (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:17450:11)
    at performWorkOnRoot (C:\Proyectos Python\Proyecto Palapa gestion servicios\node_modules\react-dom\cjs\react-dom-client.development.js:16583:35) {
  [stack]: [Getter/Setter],
  [message]: 'Test error for ErrorBoundary'
}

The above error occurred in the <ThrowErrorComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


 [32mÎ“Â£Ã´[39m src/components/templates/__tests__/ErrorBoundary.logger.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 589[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m debe renderizar UI de error cuando hay un error [33m 440[2mms[22m[39m

[2m Test Files [22m [1m[32m2 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[32m15 passed[39m[22m[90m (15)[39m
[2m   Start at [22m 21:40:38
[2m   Duration [22m 3.60s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
