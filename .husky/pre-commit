echo "ğŸ” Running pre-commit checks..."

# 1. Run ESLint
echo "ğŸ“ Running ESLint..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ ESLint failed. Please fix linting errors above."
  echo "ğŸ’¡ You can run 'npm run lint:fix' to auto-fix some issues."
  exit 1
fi

# 2. Run unit tests with coverage and check 80% threshold
echo "ğŸ§ª Running unit tests with coverage..."
npm run test:coverage
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed or coverage is below 80% threshold."
  echo "ğŸ’¡ Check the coverage report for uncovered areas."
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
echo "ğŸš€ Commit is ready to be saved."